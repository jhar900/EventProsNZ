# Story 8.2: Contractor Job Applications

## Status

Draft

## Story

**As a** contractor,  
**I want** to apply for posted jobs with tailored messages,  
**so that** I can secure new business opportunities.

## Acceptance Criteria

1. Job browsing and search functionality
2. Job application form with tailored messages
3. Portfolio and experience attachment
4. Application limits based on subscription tier (Essential: 2/month, Showcase: 5/month, Spotlight: unlimited)
5. Service category restrictions (can only apply to jobs matching their service category)
6. One application per job limit to prevent spam
7. Service category changes limited to once every 2 weeks
8. Application status tracking (submitted, viewed, shortlisted, rejected, accepted)
9. Application history and management
10. Premium notifications for Spotlight subscribers only
11. Application analytics and success tracking
12. Integration with contractor profile system
13. Bulk actions for similar jobs
14. Application templates for common job types
15. Save draft functionality for applications

## Tasks / Subtasks

- [ ] Create job browsing and search interface (AC: 1)
  - [ ] Build JobList component with filtering
  - [ ] Add search functionality with service category filters
  - [ ] Implement job status filtering (active jobs only)
  - [ ] Add location-based filtering
  - [ ] Add budget range filtering
  - [ ] Implement pagination for job listings
- [ ] Build job application form (AC: 2, 3, 15)
  - [ ] Create JobApplicationForm component
  - [ ] Add cover letter textarea with character limits
  - [ ] Implement file upload for portfolio attachments
  - [ ] Add attachment validation (file types, size limits)
  - [ ] Create save draft functionality
  - [ ] Add form validation and error handling
- [ ] Implement application limits and restrictions (AC: 4, 5, 6, 7)
  - [ ] Add subscription tier validation for application limits
  - [ ] Implement service category matching validation
  - [ ] Add one-application-per-job restriction
  - [ ] Create service category change tracking
  - [ ] Add application limit warnings and notifications
- [ ] Create application status tracking system (AC: 8, 9)
  - [ ] Add status field to JobApplication model
  - [ ] Create status update functionality
  - [ ] Build application history dashboard
  - [ ] Add status change notifications
  - [ ] Implement application management interface
- [ ] Add premium notification system (AC: 10)
  - [ ] Create notification preferences for Spotlight subscribers
  - [ ] Implement job alert system
  - [ ] Add email notification templates
  - [ ] Create in-app notification system
- [ ] Implement application analytics (AC: 11)
  - [ ] Add application success tracking
  - [ ] Create analytics dashboard for contractors
  - [ ] Track application-to-interview conversion rates
  - [ ] Add performance metrics display
- [ ] Create application templates system (AC: 14)
  - [ ] Build template management interface
  - [ ] Add common job type templates
  - [ ] Implement template selection and customization
  - [ ] Add template sharing functionality
- [ ] Add bulk actions functionality (AC: 13)
  - [ ] Create bulk application interface
  - [ ] Implement similar job detection
  - [ ] Add bulk application submission
  - [ ] Create bulk status management
- [ ] Create job application API endpoints
  - [ ] POST /jobs/{jobId}/applications - Submit application
  - [ ] GET /jobs/{jobId}/applications - Get job applications (for job poster)
  - [ ] PUT /applications/{applicationId} - Update application status
  - [ ] GET /contractors/{contractorId}/applications - Get contractor applications
  - [ ] Implement proper authorization and validation
- [ ] Integrate with contractor profile system (AC: 12)
  - [ ] Link applications to contractor profiles
  - [ ] Display application history on profile
  - [ ] Add profile completeness validation
  - [ ] Implement profile-based application recommendations

## Dev Notes

### Data Models

- **JobApplication**: Core application entity with job_id, contractor_user_id, cover_letter, attachments, status tracking, timestamps
- **Job**: Job posting entity with service_category, status, and application relationships
- **User**: Contractor relationship via contractor_user_id with subscription tier
- **Subscription**: Application limits based on tier (Essential: 2/month, Showcase: 5/month, Spotlight: unlimited)
- **BusinessProfile**: Service category and portfolio integration

### API Endpoints

- **POST /jobs/{jobId}/applications**: Submit job application with validation
- **GET /jobs/{jobId}/applications**: Get applications for job poster
- **PUT /applications/{applicationId}**: Update application status
- **GET /contractors/{contractorId}/applications**: Get contractor application history
- **GET /jobs**: List jobs with filtering and search
- **POST /applications/templates**: Create application templates
- **GET /applications/templates**: Get available templates

### Components Architecture

- **JobList**: Job browsing with search and filtering
- **JobCard**: Individual job display component
- **JobApplicationForm**: Application submission form
- **ApplicationHistory**: Contractor application management
- **ApplicationTemplates**: Template management system
- **BulkActions**: Bulk application functionality
- **ApplicationAnalytics**: Success tracking dashboard

### Integration Points

- **Subscription System**: Application limits and premium features
- **File Upload**: Portfolio and document attachments
- **Notification System**: Status updates and job alerts
- **Profile System**: Contractor profile integration
- **Search System**: Job filtering and discovery
- **Analytics**: Application success tracking

### Security Considerations

- Application ownership validation
- File upload security and validation
- Subscription tier enforcement
- Service category change restrictions
- Rate limiting for applications
- Content moderation for cover letters

### Performance Requirements

- Efficient job search with pagination
- Optimized application queries
- Caching for frequently accessed data
- Lazy loading for job listings
- Background processing for bulk actions

### Business Rules

- **Application Limits**: Essential (2/month), Showcase (5/month), Spotlight (unlimited)
- **Service Category Matching**: Contractors can only apply to jobs matching their service category
- **One Application Per Job**: Prevent spam applications
- **Service Category Changes**: Limited to once every 2 weeks
- **Premium Notifications**: Only for Spotlight subscribers

### Testing

- **Test file location**: `__tests__/components/features/jobs/`
- **Test standards**: Jest + React Testing Library + Supertest for API
- **Testing frameworks**: Unit tests for components, integration tests for API endpoints
- **Specific requirements**: Test application limits, service category validation, file uploads, status tracking, and subscription tier enforcement

## Change Log

| Date       | Version | Description            | Author       |
| ---------- | ------- | ---------------------- | ------------ |
| 2024-12-19 | 1.0     | Initial story creation | Scrum Master |

## Dev Agent Record

_This section will be populated by the development agent during implementation_

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes List

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_Results from QA Agent review will be populated here_
